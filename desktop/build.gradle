plugins {
    id 'java'
    id 'application'
}
sourceCompatibility = JavaVersion.VERSION_17
targetCompatibility = JavaVersion.VERSION_17

dependencies {
    implementation project(":core")
    implementation "com.badlogicgames.gdx:gdx-backend-lwjgl3:${gdxVersion}"
    runtimeOnly "com.badlogicgames.gdx:gdx-platform:${gdxVersion}:natives-desktop"
}

application {
    mainClass = "io.github.tinyquestcmu.desktop.DesktopLauncher"
    applicationDefaultJvmArgs = ["-Xms256m", "-Xmx1024m"]
}

tasks.withType(JavaExec) {
    // บังคับ macOS ให้ใช้ main thread
    if (org.gradle.internal.os.OperatingSystem.current().isMacOsX()) {
        jvmArgs += "-XstartOnFirstThread"
    }
}
